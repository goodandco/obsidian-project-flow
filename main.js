/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var st=Object.defineProperty;var bt=Object.getOwnPropertyDescriptor;var vt=Object.getOwnPropertyNames;var Et=Object.prototype.hasOwnProperty;var G=(n,s)=>()=>(n&&(s=n(n=0)),s);var O=(n,s)=>{for(var t in s)st(n,t,{get:s[t],enumerable:!0})},jt=(n,s,t,e)=>{if(s&&typeof s=="object"||typeof s=="function")for(let r of vt(s))!Et.call(n,r)&&r!==t&&st(n,r,{get:()=>s[r],enumerable:!(e=bt(s,r))||e.enumerable});return n};var Rt=n=>jt(st({},"__esModule",{value:!0}),n);var dt={};O(dt,{CURRENT_SETTINGS_SCHEMA_VERSION:()=>At,migrateSettings:()=>kt});function kt(n){var r,i,l;let s={dimensions:(r=n==null?void 0:n.dimensions)!=null?r:[],projectsRoot:(i=n==null?void 0:n.projectsRoot)!=null?i:"1. Projects",schemaVersion:(l=n==null?void 0:n.schemaVersion)!=null?l:0,projectRecords:{}},t=n==null?void 0:n.projectRecords;if(t&&typeof t=="object"&&!Array.isArray(t))s.projectRecords=t;else if(Array.isArray(t)){let d={};for(let a of t){if(!a||!a.info)continue;let c=a.info.dimension,o=a.info.category,p=a.info.id;!c||!o||!p||(d[c]=d[c]||{},d[c][o]=d[c][o]||{},d[c][o][p]=a)}s.projectRecords=d}else s.projectRecords={};if(Array.isArray(s.dimensions)){let d=1;s.dimensions=s.dimensions.map(a=>{var c;if(a&&typeof a=="object"){let o=(c=a.name)!=null?c:"",p=a.order,m=typeof o=="string"?o.match(/^\s*(\d+)\.\s*(.+)$/):null;return m&&(p=parseInt(m[1],10),o=m[2]),(p==null||Number.isNaN(p))&&(p=d++),{name:o,order:p,categories:Array.isArray(a.categories)?a.categories:[]}}return{name:String(a!=null?a:""),order:d++,categories:[]}})}else s.dimensions=[];let e=[...s.dimensions].sort((d,a)=>{var c,o;return((c=d.order)!=null?c:0)-((o=a.order)!=null?o:0)});return e.forEach((d,a)=>{d.order=a+1}),s.dimensions=e,(!s.schemaVersion||s.schemaVersion<2)&&(s.schemaVersion=2),s}var At,pt=G(()=>{At=2});var mt={};O(mt,{ensureValidOrThrow:()=>_t,validateProjectName:()=>St,validateTag:()=>Dt});function St(n){if(!n||!n.trim())return{ok:!1,reason:"Project name is required"};let s=n.trim();if(s.length>120)return{ok:!1,reason:"Project name too long (max 120)"};for(let t of s)if(t.charCodeAt(0)<32||t==="/"||t==="\\")return{ok:!1,reason:"Project name contains invalid characters"};return{ok:!0}}function Dt(n){if(!n||!n.trim())return{ok:!1,reason:"Tag is required"};let s=n.trim();return $t.test(s)?{ok:!0}:{ok:!1,reason:"Tag must be 2-63 chars, start with letter/digit; may include -, _, /"}}function _t(n,s){let t=n();if(!t.ok)throw new Error(`${s}: ${t.reason}`)}var $t,gt=G(()=>{$t=/^[A-Za-z0-9][A-Za-z0-9_/-]{1,62}$/});var ht={};O(ht,{processTemplate:()=>Ct});function ut(n){return n==null?"":String(n)}function Ct(n,s){if(!n||typeof n!="string")return"";let t=n;for(let[e,r]of Object.entries(s)){let i=ut(r),l=`$_${e}`;t.includes(l)&&(t=t.split(l).join(i))}for(let[e,r]of Object.entries(s)){let i=ut(r),l=new RegExp(`\\$\\{${Ft(e)}\\}`,"g");t=t.replace(l,i)}return t}function Ft(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var yt=G(()=>{});var rt={};O(rt,{sanitizeFileName:()=>ft,sanitizePath:()=>Nt});function ft(n){let s=(n!=null?n:"").trim();return Array.from(s).filter(e=>e.charCodeAt(0)>=32).join("").replace(/[\\/:*?"<>|]/g,"-").replace(/\s+/g," ").replace(/\.+$/g,"").substring(0,200)||"untitled"}function Nt(n){return n?n.split("/").filter(Boolean).map(ft).join("/"):""}var nt=G(()=>{});var X={};O(X,{SafeFileManager:()=>ot});var ot,Q=G(()=>{ot=class{constructor(s){this.vault=s.vault}async createBatch(s){let t=[];try{for(let e of s)e.type==="folder"?await this.ensureFolder(e.path):await this.createIfAbsent(e.path,e.data)==="created"&&t.push(e.path);return{ok:!0}}catch(e){for(let r of t.reverse())try{let i=this.vault.getAbstractFileByPath(r);i&&this.vault.delete&&await this.vault.delete(i)}catch(i){}return{ok:!1,error:e}}}async has(s){var t;try{return this.vault.getAbstractFileByPath(s)?!0:(t=this.vault.adapter)!=null&&t.exists?await this.vault.adapter.exists(s):!1}catch(e){return!1}}async ensureFolder(s){var e;if(!this.vault.getAbstractFileByPath(s))try{await this.vault.createFolder(s)}catch(r){if(r&&typeof r=="object"&&((e=r.message)!=null&&e.includes("Parent folder"))){let i=s.split("/").filter(Boolean),l="";for(let d of i)if(l=l?`${l}/${d}`:d,!this.vault.getAbstractFileByPath(l))try{await this.vault.createFolder(l)}catch(a){}}}}async createIfAbsent(s,t){if(await this.has(s))return"skipped";try{return await this.vault.create(s,t),"created"}catch(e){return await this.has(s),"skipped"}}}});var Mt={};O(Mt,{default:()=>Ot});module.exports=Rt(Mt);var v=require("obsidian");var at=require("obsidian"),Y=class extends at.Modal{constructor(t,e,r){super(t);this.prompt=e,this.callback=r}onOpen(){let{contentEl:t}=this;t.createEl("h2",{text:this.prompt});let e=t.createEl("input",{type:"text"});e.focus();let r=t.createEl("button",{text:"Submit"});r.onclick=()=>{let i=e.value.trim();this.close(),this.callback(i||null)}}onClose(){let{contentEl:t}=this;t.empty()}};var ct=require("obsidian"),L=class extends ct.Modal{constructor(t,e,r,i){super(t);this.prompt=e,this.choices=r,this.callback=i}onOpen(){let{contentEl:t}=this;t.createEl("h2",{text:this.prompt}),this.choices.forEach(e=>{let r=t.createEl("button",{text:e});r.onclick=()=>{this.close(),this.callback(e)}})}onClose(){let{contentEl:t}=this;t.empty()}};var E=require("obsidian");var lt=require("obsidian"),K=class extends lt.Modal{constructor(t,e){super(t);this.onResult=e}onOpen(){let{contentEl:t}=this;t.empty(),t.addClass("project-flow-settings"),t.createEl("p",{text:"Do you want skip settings to defaults? This will override all custom settings."});let e=t.createDiv({cls:"gc-row"});e.createDiv({cls:"gc-spacer"});let r=e.createEl("button",{text:"Yes, use defaults"}),i=e.createEl("button",{text:"Go back"});r.onclick=()=>{this.close(),this.onResult(!0)},i.onclick=()=>{this.close(),this.onResult(!1)}}onClose(){this.contentEl.empty()}};var Tt=[{name:"Business",order:1,categories:["R&D","Jobs","OpenSource","Education"]},{name:"Family",order:2,categories:["Vacations","Parenting","Common"]},{name:"Friends",order:3,categories:[]},{name:"Health",order:4,categories:["Clinics","Issues","R&D"]},{name:"Personal",order:5,categories:["R&D","Languages","SelfManagement","Writing","Reading","Music","Sports"]},{name:"Residence",order:6,categories:[]}],Z={dimensions:JSON.parse(JSON.stringify(Tt)),projectsRoot:"1. Projects",projectRecords:{}};function xt(n){let s=0;for(let t=0;t<n.length;t++)s=(s<<5)-s+n.charCodeAt(t),s|=0;return s}var q=class extends E.PluginSettingTab{constructor(t,e){super(t,e);this.plugin=e}display(){let{containerEl:t}=this;t.empty(),t.addClass("project-flow-settings");let e=t.createDiv({cls:"gc-row"});e.createDiv({cls:"gc-spacer"});let r=e.createEl("button",{cls:["gc-icon-button","clickable-icon"],attr:{"aria-label":"Reset to defaults",title:"Reset to defaults"}});try{(0,E.setIcon)(r,"rotate-ccw")}catch(o){r.setText("Reset to defaults")}r.onclick=()=>{new K(this.app,async p=>{p&&(this.plugin.settings=JSON.parse(JSON.stringify(Z)),await this.plugin.saveSettings(),new E.Notice("Settings were reset to defaults."),this.display())}).open()},t.createEl("h2",{text:"Dimensions"}),[...this.plugin.settings.dimensions].sort((o,p)=>{var m,u;return((m=o.order)!=null?m:0)-((u=p.order)!=null?u:0)}).forEach((o,p)=>{let m=t.createDiv({cls:"dimension-setting"}),u=m.createDiv({cls:"dimension-header"});u.addClass("gc-row"),u.createSpan({text:`${o.order}. `});let j=u.createEl("b",{text:o.name});u.createDiv({cls:"gc-spacer"});let h=u.createEl("button",{cls:["gc-icon-button","clickable-icon"]});h.setAttr("aria-label","Move up"),h.setAttr("title","Move up");try{(0,E.setIcon)(h,"arrow-up")}catch(g){h.setText("Up")}h.onclick=async()=>{let y=[...this.plugin.settings.dimensions].filter(P=>{var f,b;return((f=P.order)!=null?f:0)<((b=o.order)!=null?b:0)}).sort((P,f)=>{var b,x;return((b=f.order)!=null?b:0)-((x=P.order)!=null?x:0)})[0];if(!y)return;let w=y.order;y.order=o.order,o.order=w,await this.plugin.saveSettings(),this.display()};let T=u.createEl("button",{cls:["gc-icon-button","clickable-icon"]});T.setAttr("aria-label","Move down"),T.setAttr("title","Move down");try{(0,E.setIcon)(T,"arrow-down")}catch(g){T.setText("Down")}T.onclick=async()=>{let y=[...this.plugin.settings.dimensions].filter(P=>{var f,b;return((f=P.order)!=null?f:0)>((b=o.order)!=null?b:0)}).sort((P,f)=>{var b,x;return((b=P.order)!=null?b:0)-((x=f.order)!=null?x:0)})[0];if(!y)return;let w=y.order;y.order=o.order,o.order=w,await this.plugin.saveSettings(),this.display()};let R=u.createEl("button",{cls:["gc-icon-button","clickable-icon"]});R.setAttr("aria-label",`Delete ${o.name}`),R.setAttr("title",`Delete ${o.name}`);try{(0,E.setIcon)(R,"trash")}catch(g){R.setText("Remove")}R.onclick=async()=>{let g=this.plugin.settings.dimensions.findIndex(y=>y===o);g>=0&&this.plugin.settings.dimensions.splice(g,1),await this.plugin.saveSettings(),this.display()};let $=u.createEl("button",{cls:["gc-icon-button","clickable-icon"]});$.setAttr("aria-label",`Rename ${o.name}`),$.setAttr("title",`Rename ${o.name}`);try{(0,E.setIcon)($,"pencil")}catch(g){$.setText("Edit")}if($.onclick=async()=>{var C;let g=o.name,y=j.parentElement;(C=j.detach)==null||C.call(j),$.style.display="none",R.style.display="none";let w=y.createEl("input",{type:"text"});w.value=g,w.addClass("gc-rename");let P=y.createDiv({cls:"gc-row"});P.createDiv({cls:"gc-spacer"});let f=P.createEl("button",{cls:["gc-icon-button","clickable-icon"]});f.setAttr("aria-label","Apply"),f.setAttr("title","Apply");try{(0,E.setIcon)(f,"check")}catch(A){f.setText("Apply")}let b=P.createEl("button",{cls:["gc-icon-button","clickable-icon"]});b.setAttr("aria-label","Discard"),b.setAttr("title","Discard");try{(0,E.setIcon)(b,"x")}catch(A){b.setText("Discard")}let x=()=>{this.display()},D=async A=>{let S=A.trim();if(!S||S===g){x();return}if(this.plugin.settings.dimensions.some(B=>B!==o&&B.name===S)){new E.Notice("A dimension with this name already exists.");return}o.name=S,await this.plugin.saveSettings(),x()};f.onclick=async()=>{await D(w.value)},b.onclick=()=>x(),w.focus(),w.select(),w.onkeydown=async A=>{A.key==="Enter"&&await D(w.value),A.key==="Escape"&&x()},w.onblur=async()=>{await D(w.value)}},o.categories.length>0){let g=m.createDiv({cls:"categories-list gc-list"});o.categories.forEach((y,w)=>{var B;let P=g.createDiv({cls:"gc-list-item gc-row"}),f=this.plugin.settings.projectRecords||{},b=o.name,x=Object.keys(((B=f==null?void 0:f[b])==null?void 0:B[y])||{}),D=P.createEl("b",{text:y}),C=P.createDiv({cls:"gc-id-wrap"});x.length>0&&(C.createSpan({text:" "}),x.forEach((_,z)=>{let k=C.createSpan({cls:"gc-id-tag",text:_}),F=Math.abs(xt(_))%360;k.style.backgroundColor=`hsl(${F}, 70%, 90%)`,k.style.color=`hsl(${F}, 70%, 25%)`,z<x.length-1&&C.createSpan({text:" "})})),P.createDiv({cls:"gc-spacer"});let A=P.createEl("button",{cls:["remove-category","gc-icon-button","clickable-icon"]});A.setAttr("aria-label",`Delete ${y}`),A.setAttr("title",`Delete ${y}`);try{(0,E.setIcon)(A,"trash")}catch(_){A.setText("Remove")}A.onclick=async()=>{o.categories.splice(w,1),await this.plugin.saveSettings(),this.display()};let S=P.createEl("button",{cls:["gc-icon-button","clickable-icon"]});S.setAttr("aria-label",`Rename ${y}`),S.setAttr("title",`Rename ${y}`);try{(0,E.setIcon)(S,"pencil")}catch(_){S.setText("Edit")}S.onclick=async()=>{var it;let _=o.categories[w],z=D.parentElement;(it=D.detach)==null||it.call(D),S.style.display="none",A.style.display="none";let k=z.createEl("input",{type:"text"});k.value=_,k.addClass("gc-rename");let F=z.createDiv({cls:"gc-row"});F.createDiv({cls:"gc-spacer"});let I=F.createEl("button",{cls:["gc-icon-button","clickable-icon"]});I.setAttr("aria-label","Apply"),I.setAttr("title","Apply");try{(0,E.setIcon)(I,"check")}catch(N){I.setText("Apply")}let J=F.createEl("button",{cls:["gc-icon-button","clickable-icon"]});J.setAttr("aria-label","Discard"),J.setAttr("title","Discard");try{(0,E.setIcon)(J,"x")}catch(N){J.setText("Discard")}let H=()=>{this.display()},et=async N=>{let W=N.trim();if(!W||W===_){H();return}if(o.categories.some((wt,Pt)=>Pt!==w&&wt===W)){new E.Notice("This category already exists in the dimension.");return}o.categories[w]=W,await this.plugin.saveSettings(),H()};I.onclick=async()=>{await et(k.value)},J.onclick=()=>H(),k.focus(),k.select(),k.onkeydown=async N=>{N.key==="Enter"&&await et(k.value),N.key==="Escape"&&H()},k.onblur=async()=>{await et(k.value)}}})}let M=m.createDiv({cls:"add-category gc-row"}),U=M.createEl("input",{type:"text",placeholder:"New category"});M.createDiv({cls:"gc-spacer"});let V=M.createEl("button",{text:"Add Category"});V.onclick=async()=>{let g=U.value.trim();g&&!o.categories.includes(g)&&(o.categories.push(g),await this.plugin.saveSettings(),this.display())}});let l=t.createDiv({cls:"add-dimension"});l.createEl("h3",{text:"Add new dimension"});let d=l.createDiv({cls:"gc-row"}),a=d.createEl("input",{type:"text",placeholder:"Dimension name"});d.createDiv({cls:"gc-spacer"});let c=d.createEl("button",{text:"Add Dimension"});c.onclick=async()=>{let o=a.value.trim();if(o&&!this.plugin.settings.dimensions.some(p=>p.name===o)){{let p=this.plugin.settings.dimensions.reduce((m,u)=>{var j;return Math.max(m,(j=u.order)!=null?j:0)},0);this.plugin.settings.dimensions.push({name:o,order:p+1,categories:[]})}await this.plugin.saveSettings(),this.display()}}}};var tt=class extends v.Plugin{async onload(){console.log("ProjectFlow plugin loaded"),await this.loadSettings(),this.addSettingTab(new q(this.app,this)),this.addCommand({id:"add-project-info",name:"Add Project Info",callback:()=>this.showProjectPrompt()}),this.addCommand({id:"remove-project-by-id",name:"Remove Project",callback:()=>this.showProjectRemovePrompt()})}async loadSettings(){let t=await this.loadData();try{let{migrateSettings:e}=await Promise.resolve().then(()=>(pt(),dt));this.settings=Object.assign({},Z,e(t))}catch(e){this.settings=Object.assign({},Z,t)}}async saveSettings(){await this.saveData(this.settings)}async showProjectRemovePrompt(){if(!this.settings.projectRecords){new v.Notice("You don't have any projects yet.");return}let t=this.settings.projectRecords,e=[...this.settings.dimensions].sort((c,o)=>{var p,m;return((p=c.order)!=null?p:0)-((m=o.order)!=null?m:0)}).map(c=>c.name),r=await this.promptForChoice("Select dimension of your project:",e);if(!r){new v.Notice("Project removal cancelled. No dimension selected.");return}let i=this.settings.dimensions.find(c=>c.name===r);if(!i||i.categories.length===0){new v.Notice("Selected dimension has no categories. No project to remove.");return}let l=i.categories,d=await this.promptForChoice("Select category:",l);if(!d){new v.Notice("Project removal cancelled. No category selected.");return}let a=await this.promptForChoice("Select Project to remove:",Object.keys(t[r][d]));if(!a){new v.Notice("Project deletion cancelled. No project was provided.");return}new v.Notice("Project "+a+" has been successfully removed.")}async showProjectPrompt(){var u,j;let t=await this.promptForText("Enter project name:");if(!t){new v.Notice("Project creation cancelled. No project name provided.");return}let e=await this.promptForText("Enter project tag:");if(!e){new v.Notice("Project creation cancelled. No project tag provided.");return}let r=await this.promptForText("Enter Project ID (used for task prefixes):");if(!r){new v.Notice("Project creation cancelled. No Project ID provided.");return}let i=await this.promptForText("Enter parent name (optional):"),l=i&&i.trim().length>0?i.trim():null,d=[...this.settings.dimensions].sort((h,T)=>{var R,$;return((R=h.order)!=null?R:0)-(($=T.order)!=null?$:0)}).map(h=>h.name),a=await this.promptForChoice("Select dimension:",d);if(!a){new v.Notice("Project creation cancelled. No dimension selected.");return}let c=this.settings.dimensions.find(h=>h.name===a);if(!c||c.categories.length===0){new v.Notice("Selected dimension has no categories. Please add categories in settings first.");return}let o=c.categories,p=await this.promptForChoice("Select category:",o);if(!p){new v.Notice("Project creation cancelled. No category selected.");return}let m={name:t,tag:e,id:r,parent:l,dimension:a,category:p};try{let h=this.settings.projectRecords;if(h&&!Array.isArray(h)&&((j=(u=h[a])==null?void 0:u[p])==null?void 0:j[r])){new v.Notice(`Project with ID "${r}" already exists in ${a}:${p}. Choose a different ID.`);return}}catch(h){}try{let{validateProjectName:h,validateTag:T,ensureValidOrThrow:R}=await Promise.resolve().then(()=>(gt(),mt));R(()=>h(m.name),"Invalid project name"),R(()=>T(m.tag),"Invalid tag"),R(()=>T(m.id),"Invalid Project ID")}catch(h){let T=h.message||"Invalid input";console.error("Validation error:",h),new v.Notice(T);return}await this.createProject(m)}async promptForText(t){return new Promise(e=>{new Y(this.app,t,e).open()})}async promptForChoice(t,e){return new Promise(r=>{new L(this.app,t,e,r).open()})}generateProjectVariables(t){let e=new Date,r=e.getFullYear().toString(),i=e.toISOString().split("T")[0],l=this.settings.projectsRoot||"1. Projects",d=t.parent&&t.parent.trim().length>0?`.${t.parent.trim()}`:"",a=`${r}${d}.${t.name}`,c=this.settings.dimensions.find(u=>u.name===t.dimension),o=c?`${c.order}. ${c.name}`:t.dimension,p=`${l}/${o}/${t.category}/${a}`,m=`${p}`;return{PROJECT_NAME:t.name,PROJECT_TAG:t.tag,PROJECT_PARENT:t.parent?t.parent:"",PARENT_TAG:t.parent?t.tag:"",YEAR:r,DATE:i,PROJECT_FULL_NAME:a,PROJECT_RELATIVE_PATH:p,PROJECT_PATH:m,DIMENSION:c?c.name:t.dimension,CATEGORY:t.category,PROJECT_ID:t.id,PROJECT_DIMENSION:c?c.name:t.dimension}}async processTemplate(t,e){try{let{processTemplate:r}=await Promise.resolve().then(()=>(yt(),ht));return r(t,e)}catch(r){console.warn("Template processor import failed, using legacy replacement:",r);let i=t;return Object.entries(e).forEach(([l,d])=>{let a=`$_${l}`;i=i.split(a).join(d)}),i}}async createProject(t){try{let e=this.generateProjectVariables(t),r=this.settings.projectsRoot||"1. Projects",{sanitizePath:i,sanitizeFileName:l}=await Promise.resolve().then(()=>(nt(),rt)),{SafeFileManager:d}=await Promise.resolve().then(()=>(Q(),X)),a=new d(this.app),c=i(r),o=this.settings.dimensions.find(g=>g.name===t.dimension),p=o?`${o.order}. ${o.name}`:t.dimension,m=l(p),u=l(t.category),j=i(`${c}/${m}/${u}/${e.PROJECT_FULL_NAME}`),T=[{type:"folder",path:j},...["Knowledge Base","Meetings","Work","Work/Tasks","People"].map(g=>({type:"folder",path:i(`${j}/${g}`)}))],R=this.app.vault.adapter,$=`.obsidian/plugins/${this.manifest.id}/src/templates`,M=[{fileName:`${e.PROJECT_FULL_NAME}.md`,template:"project.md"},{fileName:`${t.name} Meetings.md`,template:"meetings.md"},{fileName:`${t.name} People.md`,template:"people.md"},{fileName:`${t.name} Work.md`,template:"work.md"}],U=[];for(let g of M){let y=`${$}/${g.template}`;if(!await R.exists(y))throw new Error(`Template file not found: ${g.template}`);let w=await R.read(y),P=await this.processTemplate(w,e),f=i(`${j}/${l(g.fileName)}`);U.push({type:"file",path:f,data:P})}let V=await a.createBatch([...T,...U]);if(!("ok"in V)||!V.ok)throw new Error(`Batch creation failed: ${V.error||"unknown"}`);await this.createProjectTemplates(t.name,e),await this.recordProjectCreation(t,e),new v.Notice(`Project "${t.name}" created successfully!`)}catch(e){new v.Notice(`Error creating project: ${e}`),console.error("Project creation error:",e)}}async recordProjectCreation(t,e){try{let r={info:t,variables:e,createdAt:new Date().toISOString()},i=t.dimension,l=t.category,d=t.id;if(!this.settings.projectRecords||Array.isArray(this.settings.projectRecords)){let c={},o=Array.isArray(this.settings.projectRecords)?this.settings.projectRecords:[];for(let p of o){let m=p.info.dimension,u=p.info.category,j=p.info.id;c[m]=c[m]||{},c[m][u]=c[m][u]||{},c[m][u][j]=p}this.settings.projectRecords=c}let a=this.settings.projectRecords;if(a[i]=a[i]||{},a[i][l]=a[i][l]||{},a[i][l][d])throw new Error(`Project with id "${d}" already exists in ${i}:${l}`);a[i][l][d]=r,await this.saveSettings()}catch(r){throw console.warn("Failed to record project creation:",r),r}}async ensureDirectoryExists(t){let{SafeFileManager:e}=await Promise.resolve().then(()=>(Q(),X));await new e(this.app).ensureFolder(t)}async createProjectFile(t,e,r,i){try{let l=this.app.vault.adapter,d=`.obsidian/plugins/${this.manifest.id}/src/templates/${r}`;if(console.log("Template: "+d),!await l.exists(d))throw new Error(`Template file not found: ${r}`);let a=await this.app.vault.adapter.read(d),c=await this.processTemplate(a,i),o=`${t}/${e}`,{SafeFileManager:p}=await Promise.resolve().then(()=>(Q(),X));await new p(this.app).createIfAbsent(o,c)}catch(l){throw console.error(`Failed to create ${e}:`,l),new Error(`Failed to create ${e}: ${l}`)}}async createProjectTemplates(t,e){let{sanitizePath:r,sanitizeFileName:i}=await Promise.resolve().then(()=>(nt(),rt)),l=r(`Templates/${t}_Templates`);await this.ensureDirectoryExists(l);let d=[{source:"template-meeting-daily.md",target:`${t}_Meeting_Daily_Template.md`},{source:"template-meeting-discussion.md",target:`${t}_Meeting_Discussion_Template.md`},{source:"template-meeting-knowledge.md",target:`${t}_Meeting_Knowledge_Template.md`},{source:"template-meeting-planning.md",target:`${t}_Meeting_Planning_Template.md`},{source:"template-meeting-refinement.md",target:`${t}_Meeting_Refinement_Template.md`},{source:"template-meeting-retro.md",target:`${t}_Meeting_Retro_Template.md`},{source:"template-meeting-demo.md",target:`${t}_Meeting_Demo_Template.md`},{source:"template-sprint.md",target:`${t}_Sprint_Template.md`},{source:"template-task.md",target:`${t}_Task_Template.md`},{source:"template-idea.md",target:`${t}_Idea_Template.md`}];for(let a of d)try{let c=i(a.target);await this.createProjectFile(l,c,a.source,e)}catch(c){console.warn(`Failed to create template ${a.target}: ${c}`)}}};var Ot=tt;
